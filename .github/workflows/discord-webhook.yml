name: Discord Notification

on:
  push:
    paths:
      - 'patch-bundles.json'
  workflow_dispatch:

jobs:
  send_discord_notification:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
      
      - name: Send Discord notification
        if: ${{ github.event_name == 'push' && contains(github.event.head_commit.modified, 'patch-bundles.json') || github.event_name == 'workflow_dispatch' }}
        uses: tsickert/discord-webhook@v6.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          content: 'GitHub Action triggered: ${{ github.repository }}'
          embed-title: 'GitHub Action triggered'
          embed-description: '${{ github.repository }} has been triggered.'
